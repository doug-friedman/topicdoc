<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Topic-Specific Diagnostics for LDA and CTM Topic Models • topicdoc</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Topic-Specific Diagnostics for LDA and CTM Topic Models">
<meta property="og:description" content="Calculates topic-specific diagnostics (e.g. mean token length, exclusivity) for 
    Latent Dirichlet Allocation and Correlated Topic Models fit using the topicmodels package.
    For more details, see Chapter 12 in Airoldi et al. (2014, ISBN:9781466504080), 
    pp 262-272 Mimno et al. (2011, ISBN:9781937284114), and Bischof et al. (2014) &lt;arXiv:1206.4631v1&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">topicdoc</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/basic_usage.html">Basic usage</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/doug-friedman/topicdoc/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="topicdoc">topicdoc<a class="anchor" aria-label="anchor" href="#topicdoc"></a>
</h1></div>
<!-- badges: start -->
<p>Like a (good) doctor, the goal of topicdoc is to help diagnose issues with your topic models through a variety of different diagnostics and metrics. There are a lot of great R packages for fitting topic models, but not a lot that help evaluate their fit. This package seeks to fill that void with functions that easily allow you to run those diagnostics/metrics efficiently on a variety of topic models.</p>
<p>Currently, only topic models from the <code>topicmodels</code> library are supported. However, I’m targeting those from the <code>stm</code> library next.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the CRAN version of topicdoc with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"topicdoc"</span><span class="op">)</span></span></code></pre></div>
<p>You can install the development version of topicdoc from <a href="https://github.com/doug-friedman/topicdoc" class="external-link">Github</a> with:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"doug-friedman/topicdoc"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>This is a simple use case - using an LDA model with the Associated Press Dataset in <code>topicmodels</code> which is made up of AP articles from 1988.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/doug-friedman/topicdoc" class="external-link">topicdoc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">topicmodels</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"AssociatedPress"</span><span class="op">)</span></span>
<span><span class="va">lda_ap4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/topicmodels/man/lda.html" class="external-link">LDA</a></span><span class="op">(</span><span class="va">AssociatedPress</span>,</span>
<span>               control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="fl">33</span><span class="op">)</span>, k <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># See the top 10 terms associated with each of the topics</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/terms.html" class="external-link">terms</a></span><span class="op">(</span><span class="va">lda_ap4</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt;       Topic 1  Topic 2   Topic 3     Topic 4     </span></span>
<span><span class="co">#&gt;  [1,] "i"      "percent" "bush"      "soviet"    </span></span>
<span><span class="co">#&gt;  [2,] "people" "million" "i"         "government"</span></span>
<span><span class="co">#&gt;  [3,] "two"    "year"    "president" "united"    </span></span>
<span><span class="co">#&gt;  [4,] "police" "billion" "court"     "president" </span></span>
<span><span class="co">#&gt;  [5,] "years"  "new"     "federal"   "people"    </span></span>
<span><span class="co">#&gt;  [6,] "new"    "market"  "new"       "police"    </span></span>
<span><span class="co">#&gt;  [7,] "city"   "company" "house"     "military"  </span></span>
<span><span class="co">#&gt;  [8,] "time"   "prices"  "state"     "states"    </span></span>
<span><span class="co">#&gt;  [9,] "three"  "stock"   "dukakis"   "party"     </span></span>
<span><span class="co">#&gt; [10,] "like"   "last"    "campaign"  "two"</span></span>
<span></span>
<span><span class="co"># Calculate all diagnostics for each topic in the topic model</span></span>
<span><span class="va">diag_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/topic_diagnostics.html">topic_diagnostics</a></span><span class="op">(</span><span class="va">lda_ap4</span>, <span class="va">AssociatedPress</span><span class="op">)</span></span>
<span><span class="va">diag_df</span></span>
<span><span class="co">#&gt;   topic_num topic_size mean_token_length dist_from_corpus tf_df_dist</span></span>
<span><span class="co">#&gt; 1         1   3476.377               4.1        0.3899012   24.08191</span></span>
<span><span class="co">#&gt; 2         2   1910.153               5.6        0.5044673   26.67523</span></span>
<span><span class="co">#&gt; 3         3   2504.622               5.4        0.3830014   26.46131</span></span>
<span><span class="co">#&gt; 4         4   2581.848               6.5        0.3988826   25.52163</span></span>
<span><span class="co">#&gt;   doc_prominence topic_coherence topic_exclusivity</span></span>
<span><span class="co">#&gt; 1           1053       -81.83339          7.813034</span></span>
<span><span class="co">#&gt; 2            598       -79.50691          9.560433</span></span>
<span><span class="co">#&gt; 3            783      -106.40062          9.162590</span></span>
<span><span class="co">#&gt; 4            775       -84.46149          9.058854</span></span>
<span></span>
<span><span class="co"># ...or calculate them individually</span></span>
<span><span class="fu"><a href="reference/topic_size.html">topic_size</a></span><span class="op">(</span><span class="va">lda_ap4</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3476.377 1910.153 2504.622 2581.848</span></span></code></pre></div>
<p>It’s a lot easier to interpret the output if you put it all together in a nice plot.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">diag_df</span> <span class="op">&lt;-</span> <span class="va">diag_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>topic_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/terms.html" class="external-link">terms</a></span><span class="op">(</span><span class="va">lda_ap4</span>, <span class="fl">5</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>           <span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="fl">2</span>, <span class="va">paste</span>, collapse <span class="op">=</span> <span class="st">", "</span><span class="op">)</span>,</span>
<span>         topic_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">topic_num</span>, <span class="va">topic_label</span>, sep <span class="op">=</span> <span class="st">" - "</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">diag_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">gather</span><span class="op">(</span><span class="va">diagnostic</span>, <span class="va">value</span>, <span class="op">-</span><span class="va">topic_label</span>, <span class="op">-</span><span class="va">topic_num</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">topic_num</span>, y <span class="op">=</span> <span class="va">value</span>,</span>
<span>             fill <span class="op">=</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="va">topic_label</span>, <span class="fl">25</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">facet_wrap</span><span class="op">(</span><span class="op">~</span><span class="va">diagnostic</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Topic Number"</span>, y <span class="op">=</span> <span class="st">"Diagnostic Value"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Topic Label"</span>, title <span class="op">=</span> <span class="st">"All Topic Model Diagnostics"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example_plot-1.png" width="100%"></p>
<p>These diagnostics help provide a more rigorous confirmation of our intuition about identifying “good” versus “bad” topics in a topic model.</p>
<p>Almost, immediately you’d deduce that Topic 1 looks odd as it contains a lot of generic words (e.g. “two”, “three”, “like”). Using the diagnostics provided, you can see that Topic 1 has the largest topic size and highest document prominence indicating that it’s incorporating many more tokens and documents than the others. The low TF/DF distance and exclusivity confirm our susipicion about the generic nature of the topic.</p>
<p>Alternatively, you can see that Topic 2 - the one centered around financial news - is the most coherent and exclusive topic.</p>
</div>
<div class="section level2">
<h2 id="diagnosticsmetrics-included">Diagnostics/Metrics Included<a class="anchor" aria-label="anchor" href="#diagnosticsmetrics-included"></a>
</h2>
<table class="table">
<colgroup>
<col width="31%">
<col width="13%">
<col width="55%">
</colgroup>
<thead><tr class="header">
<th align="center">Diagnostic/Metric</th>
<th align="center">Function</th>
<th align="center">Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="center">topic size</td>
<td align="center"><code>topic_size</code></td>
<td align="center">Total (weighted) number of tokens per topic</td>
</tr>
<tr class="even">
<td align="center">mean token length</td>
<td align="center"><code>mean_token_length</code></td>
<td align="center">Average number of characters for the top tokens per topic</td>
</tr>
<tr class="odd">
<td align="center">distance from corpus distribution</td>
<td align="center"><code>dist_from_corpus</code></td>
<td align="center">Distance of a topic’s token distribution from the overall corpus token distribution</td>
</tr>
<tr class="even">
<td align="center">distance between token and document frequencies</td>
<td align="center"><code>tf_df_dist</code></td>
<td align="center">Distance between a topic’s token and document distributions</td>
</tr>
<tr class="odd">
<td align="center">document prominence</td>
<td align="center"><code>doc_prominence</code></td>
<td align="center">Number of unique documents where a topic appears</td>
</tr>
<tr class="even">
<td align="center">topic coherence</td>
<td align="center"><code>topic_coherence</code></td>
<td align="center">Measure of how often the top tokens in each topic appear together in the same document</td>
</tr>
<tr class="odd">
<td align="center">topic exclusivity</td>
<td align="center"><code>topic_exclusivity</code></td>
<td align="center">Measure of how unique the top tokens in each topic are compared to the other topics</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="key-references">Key References<a class="anchor" aria-label="anchor" href="#key-references"></a>
</h2>
<p>The following documents provide key references for the diagnostics/metrics included in the package.</p>
<ul>
<li><a href="http://www.people.fas.harvard.edu/~airoldi/pub/books/b02.AiroldiBleiEroshevaFienberg2014HandbookMMM/Ch12_MMM2014.pdf" class="external-link">Jordan Boyd-Graber, David Mimno, and David Newman, 2014. Care and Feeding of Topic Models: Problems, Diagnostics, and Improvements. CRC Handbooks of Modern Statistical Methods. CRC Press, Boca Raton, Florida.</a></li>
<li><a href="https://mallet.cs.umass.edu/diagnostics.php" class="external-link">MALLET Topic Model Diagnostics</a></li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=topicdoc" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/doug-friedman/topicdoc/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/doug-friedman/topicdoc/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing topicdoc</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Doug Friedman <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#maturing" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></li>
<li><a href="https://CRAN.R-project.org/package=topicdoc" class="external-link"><img src="https://www.r-pkg.org/badges/version/topicdoc" alt="CRAN status"></a></li>
<li><a href="https://cran.r-project.org/web/checks/check_results_topicdoc.html" class="external-link"><img src="https://cranchecks.info/badges/summary/topicdoc" alt="cran checks"></a></li>
<li><a href="https://app.codecov.io/gh/doug-friedman/topicdoc?branch=master" class="external-link"><img src="https://codecov.io/gh/doug-friedman/topicdoc/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/doug-friedman/topicdoc/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/doug-friedman/topicdoc/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Doug Friedman.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.5.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
